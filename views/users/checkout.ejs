<% include ('../usersidepartials/header')%>

    <title>aranoz|checkout</title>
    <link rel="icon" href="/img/favicon.png">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css">

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="/css/usercss/bootstrap.min.css">
    <!-- animate CSS -->
    <link rel="stylesheet" href="/css/usercss/animate.css">
    <!-- owl carousel CSS -->
    <link rel="stylesheet" href="/css/usercss/owl.carousel.min.css">
    <!-- nice select CSS -->
    <link rel="stylesheet" href="/css/usercss/nice-select.css">
    <!-- font awesome CSS -->
    <link rel="stylesheet" href="/css/usercss/all.css">
    <!-- flaticon CSS -->
    <link rel="stylesheet" href="/css/usercss/flaticon.css">
    <link rel="stylesheet" href="/css/usercss/themify-icons.css">
    <!-- font awesome CSS -->
    <link rel="stylesheet" href="/css/usercss/magnific-popup.css">
    <!-- swiper CSS -->
    <link rel="stylesheet" href="/css/usercss/slick.css">
    <link rel="stylesheet" href="/css/usercss/price_rangs.css">
    <!-- style CSS -->
    <link rel="stylesheet" href="/css/usercss/style.css">
    </head>

    <body>
        <!--::header part start::-->
        <header class="main_menu home_menu">
            <div class="container">
                <div class="row align-items-center">
                    <div class="col-lg-12">
                        <nav class="navbar navbar-expand-lg navbar-light">
                            <a class="navbar-brand" href="index.html"> <img src="/img/logo.png" alt="logo"> </a>
                            <button class="navbar-toggler" type="button" data-toggle="collapse"
                                data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent"
                                aria-expanded="false" aria-label="Toggle navigation">
                                <span class="menu_icon"><i class="fas fa-bars"></i></span>
                            </button>

                            <div class="collapse navbar-collapse main-menu-item" id="navbarSupportedContent">
                                <ul class="navbar-nav">
                                    <li class="nav-item">
                                        <a class="nav-link" href="/dashboard">Dashboard</a>
                                    </li>
                                    <li class="nav-item dropdown">
                                        <a class="nav-link dropdown-toggle" href="blog.html" id="navbarDropdown_1"
                                            role="button" data-toggle="dropdown" aria-haspopup="true"
                                            aria-expanded="false">
                                            Shop
                                        </a>
                                        <div class="dropdown-menu" aria-labelledby="navbarDropdown_1">
                                            <a class="dropdown-item" href="category.html"> shop category</a>
                                            <a class="dropdown-item" href="single-product.html">product details</a>

                                        </div>
                                    </li>
                                    <!-- <li class="nav-item dropdown">
                                <a class="nav-link dropdown-toggle" href="blog.html" id="navbarDropdown_3"
                                    role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                    pages
                                </a>
                                <div class="dropdown-menu" aria-labelledby="navbarDropdown_2">
                                    <a class="dropdown-item" href="login.html"> login</a>
                                    <a class="dropdown-item" href="tracking.html">tracking</a>
                                    <a class="dropdown-item" href="checkout.html">product checkout</a>
                                    <a class="dropdown-item" href="cart.html">shopping cart</a>
                                    <a class="dropdown-item" href="confirmation.html">confirmation</a>
                                    <a class="dropdown-item" href="elements.html">elements</a>
                                </div>
                            </li> -->
                                    <!-- <li class="nav-item dropdown">
                                <a class="nav-link dropdown-toggle" href="blog.html" id="navbarDropdown_2"
                                    role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                    blog
                                </a>
                                <div class="dropdown-menu" aria-labelledby="navbarDropdown_2">
                                    <a class="dropdown-item" href="blog.html"> blog</a>
                                    <a class="dropdown-item" href="single-blog.html">Single blog</a>
                                </div>
                            </li> -->

                                    <li class="nav-item">
                                        <a class="nav-link" href="/contact">Contact</a>
                                    </li>
                                </ul>
                            </div>
                            <div class="hearer_icon d-flex">
                                <a id="search_1" href="javascript:void(0)"><i class="bi bi-search"></i></a>
                                <a href=""><i class="bi bi-heart"></i></a>
                                <div class="dropdown cart">
                                    <a class="dropdown-toggle" href="#" id="navbarDropdown3" role="button"
                                        data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                        <i class="bi bi-cart"></i>
                                    </a>
                                    <!-- <div class="dropdown-menu" aria-labelledby="navbarDropdown">
                                <div class="single_product">

                                </div>
                            </div> -->

                                </div>
                            </div>
                        </nav>
                    </div>
                </div>
            </div>
            <!-- <div class="search_input" id="search_input_box">
        <div class="container ">
            <form class="d-flex justify-content-between search-inner">
                <input type="text" class="form-control" id="search_input" placeholder="Search Here">
                <button type="submit" class="btn"></button>
                <span class="ti-close" id="close_search" title="Close Search"></span>
            </form>
        </div>
    </div> -->
        </header>
        <!-- Header part end-->

        <!--================Home Banner Area =================-->
        <!-- breadcrumb start-->
        <section class="breadcrumb breadcrumb_bg">
            <div class="container">
                <div class="row justify-content-center">
                    <div class="col-lg-8">
                        <div class="breadcrumb_iner">
                            <div class="breadcrumb_iner_item">
                                <h2>Products Checkout</h2>
                                <p><a href="/user/dashboard">Dashboard</a> <span>-</span><a href="/user/cart">Cart</a>
                                    <span>-</span>Checkout
                                </p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>
        <!-- breadcrumb start-->

        <!--================Checkout Area =================-->
        <section class="checkout_area padding_top">
            <div class="container">

                <div class="cupon_area">
                    <div class="check_title">
                        <h2>
                            Have a coupon?
                            <a href="#">Click here to see your available coupon</a>
                        </h2>
                    </div>
                    <input type="text" placeholder="Enter coupon code" />
                    <a class="tp_btn" href="#">Apply Coupon</a>
                </div>
                <div class="billing_details">
                    <div class="row">
                        <div class="col-lg-7">
                            <h3>Select Addresses</h3>
                            <div class="row" id="addresslist">
                                <% if(addresses){ %>
                                    <% addresses.address.forEach(function(address, index) { %>
                                        <div class="col-md-6">
                                            <div class="address-item mb-3 d-flex align-items-start">
                                                
                                                <input type="radio" name="selectedAddress" value="<%= address._id %>"
                                                    id="address<%= index %>" class="mr-2" data-name="<%=address.name%>"
                                                    data-phone="<%=address.phone%>" data-email="<%=address.email%>"
                                                    data-city="<%=address.city%>" data-district="<%=address.district%>"
                                                    data-state="<%=address.state%>" data-pincode="<%=address.pincode%>">
                                                <textarea class="form-control" rows="3" style="height: 200px;" readonly>
                        Name: <%= address.name %>, 
                        Phone: <%= address.phone %>, 
                        Email: <%= address.email %>, 
                        City: <%= address.city %>, 
                        District: <%= address.district %>, 
                        State: <%= address.state %>, 
                        Pincode: <%= address.pincode %>
                      </textarea>
                                            </div>
                                        </div>
                                        <% }); %>
                                            <% } %>
                            </div>
                            <h3>Address for Delivery</h3>
                            <form class="row contact_form" action="" method="post" id="addressform">
                                <input type="hidden" id="addressId" name="addressId" value="" />

                                <div class="col-md-6 form-group p_star">
                                    <input type="text" class="form-control" id="name" name="name" placeholder="Name"
                                        value="<%=addresses.address[0].name%>" readonly />
                                </div>

                                <div class="col-md-6 form-group p_star">
                                    <input type="text" class="form-control" id="number" name="number"
                                        placeholder="Phone" value="<%=addresses.address[0].phone%>" readonly />
                                </div>
                                <div class="col-md-6 form-group p_star">
                                    <input type="email" class="form-control" id="email" name="email" placeholder="Email"
                                        value="<%=addresses.address[0].email%>" readonly />
                                </div>

                                <div class="col-md-12 form-group p_star">
                                    <input type="text" class="form-control" id="city" name="city" placeholder="City"
                                        value="<%=addresses.address[0].city%>" readonly />
                                </div>
                                <div class="col-md-12 form-group p_star">
                                    <input type="text" class="form-control" id="district" name="district"
                                        placeholder="District" value="<%=addresses.address[0].district%>" readonly />
                                </div>
                                <div class="col-md-12 form-group p_star">
                                    <input type="text" class="form-control" id="state" name="state" placeholder="State"
                                        value="<%=addresses.address[0].state%>" readonly />
                                </div>

                                <div class="col-md-12 form-group p_star">
                                    <input type="text" class="form-control" id="pincode" name="pincode"
                                        placeholder="Pincode" value="<%=addresses.address[0].pincode%>" readonly />

                                </div>
                            </form>

                            <!-- <a class="btn_1" id="formsubmit">Add address</a> -->
                            <!-- <form action="" id="addanotheraddress">
                                <button class="btn_1" id="formsubmit" type="submit">
                                    Add another address
                                </button>
                            </form> -->
                            <form id="addanotheraddress">
                                <button class="btn_1" type="button" data-toggle="modal" data-target="#addressModal">
                                    Add another address
                                </button>
                            </form>

                        </div>
                        <div class="col-lg-5">
                            <div class="order_box">
                                <h2>Your Order</h2>
                                
                                <ul class="list">
                                    <li>
                                        <a >Product
                                            <span>Total</span>
                                        </a>
                                    </li>
                                    <%cartData.items.forEach(item=>{%>
                                    <li>
                                        <a><%=item.productName%>
                                            <span class="middle">x<%=item.quantity%></span>
                                            <span class="last">₹<%=item.totalPrice%></span>
                                        </a>
                                    </li><%})%>
                                   
                                </ul>
                                <ul class="list list_2">
                                    <li>
                                        <a href="#">Subtotal
                                            <span></span>
                                        </a>
                                    </li>
                                    <li>
                                        <a href="#">Shipping
                                            <span>Flat rate: ₹0.00</span>
                                        </a>
                                    </li>
                                    <li>
                                        <a href="#">Total
                                            <span>₹<%=cartData.totalPrice%></span>
                                        </a>
                                    </li>
                                </ul>
                                <div class="payment_item">
                                    <p>
                                        Please send a check to Store Name, Store Street, Store Town,
                                        Store State / County, Store Postcode.
                                        Please send a check to Store Name, Store Street, Store Town,
                                        Store State / County, Store Postcode.
                                    </p>
                                    <div class="radion_btn">
                                        <input type="radio" id="f-option5" name="selector" />
                                        <label for="f-option5">Cash On Delivery</label>
                                        <div class="check"></div>
                                    </div>
                                    
                                </div>
                                <div class="payment_item active">
                                    <div class="radion_btn">
                                        <input type="radio" id="f-option6" name="selector" />
                                        <label for="f-option6">Wallet </label>
                                        <img src="img/product/single-product/card.jpg" alt="" />
                                        <div class="check"></div>
                                    </div>
                                    <!-- <p>
                                        Please send a check to Store Name, Store Street, Store Town,
                                        Store State / County, Store Postcode.
                                    </p> -->
                                </div>
                                <div class="payment_item active">
                                    <div class="radion_btn">
                                        <input type="radio" id="f-option6" name="selector" />
                                        <label for="f-option6">Razorpay </label>
                                        <img src="img/product/single-product/card.jpg" alt="" />
                                        <div class="check"></div>
                                    </div>
                                    <!-- <p>
                                        Please send a check to Store Name, Store Street, Store Town,
                                        Store State / County, Store Postcode.
                                    </p> -->
                                </div>
                                <div class="creat_account">
                                    <input type="checkbox" id="f-option4" name="selector" />
                                    <label for="f-option4">I’ve read and accept the </label>
                                    <a href="#">terms & conditions*</a>
                                </div>
                                <a class="btn_3" href="#">Proceed to Pay</a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>
        <!--================End Checkout Area =================-->
        <!-- modal -->
        <div class="modal fade" id="addressModal" tabindex="-1" role="dialog" aria-labelledby="addressModalLabel" aria-hidden="true">
            <div class="modal-dialog" role="document">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title" id="addressModalLabel">Add New Address</h5>
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                            <span aria-hidden="true">&times;</span>
                        </button>
                    </div>
                    <div class="modal-body">
                       
                        <form class="row contact_form" action="" method="post" id="addressform">
                            <input type="hidden" id="addressId" name="addressId" value="<%=addresses._id%>" />

                            <div class="col-md-6 form-group p_star">
                                <input type="text" class="form-control" id="modalName" name="name" placeholder="Name"
                                    value="<%=addresses.address[0].name%>"  />
                            </div>

                            <div class="col-md-6 form-group p_star">
                                <input type="text" class="form-control" id="modalPhone" name="number"
                                    placeholder="Phone" value="<%=addresses.address[0].phone%>"  />
                            </div>
                            <div class="col-md-6 form-group p_star">
                                <input type="email" class="form-control" id="modalEmail" name="email" placeholder="Email"
                                    value="<%=addresses.address[0].email%>"  />
                            </div>

                            <div class="col-md-12 form-group p_star">
                                <input type="text" class="form-control" id="modalCity" name="city" placeholder="City"
                                    value="<%=addresses.address[0].city%>"  />
                            </div>
                            <div class="col-md-12 form-group p_star">
                                <input type="text" class="form-control" id="modalDistrict" name="district"
                                    placeholder="District" value="<%=addresses.address[0].district%>"  />
                            </div>
                            <div class="col-md-12 form-group p_star">
                                <input type="text" class="form-control" id="modalState" name="state" placeholder="State"
                                    value="<%=addresses.address[0].state%>"  />
                            </div>

                            <div class="col-md-12 form-group p_star">
                                <input type="text" class="form-control" id="modalPincode" name="pincode"
                                    placeholder="Pincode" value="<%=addresses.address[0].pincode%>"  />

                            </div>
                        </form>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn_1" data-dismiss="modal">Close</button>
                        <button type="button" class="btn_1" id="saveAddressBtn">Save Address</button>
                    </div>
                </div>
            </div>
        </div>
    
        <!-- jQuery and Bootstrap JS -->
       
         <!-- modal -->
        <!--::footer_part start::-->
        <footer class="footer_part">
            <div class="container">
                <div class="row justify-content-around">
                    <div class="col-sm-6 col-lg-2">
                        <div class="single_footer_part">
                            <h4>Top Products</h4>
                            <ul class="list-unstyled">
                                <li><a href="">Managed Website</a></li>
                                <li><a href="">Manage Reputation</a></li>
                                <li><a href="">Power Tools</a></li>
                                <li><a href="">Marketing Service</a></li>
                            </ul>
                        </div>
                    </div>
                    <div class="col-sm-6 col-lg-2">
                        <div class="single_footer_part">
                            <h4>Quick Links</h4>
                            <ul class="list-unstyled">
                                <li><a href="">Jobs</a></li>
                                <li><a href="">Brand Assets</a></li>
                                <li><a href="">Investor Relations</a></li>
                                <li><a href="">Terms of Service</a></li>
                            </ul>
                        </div>
                    </div>
                    <div class="col-sm-6 col-lg-2">
                        <div class="single_footer_part">
                            <h4>Features</h4>
                            <ul class="list-unstyled">
                                <li><a href="">Jobs</a></li>
                                <li><a href="">Brand Assets</a></li>
                                <li><a href="">Investor Relations</a></li>
                                <li><a href="">Terms of Service</a></li>
                            </ul>
                        </div>
                    </div>
                    <div class="col-sm-6 col-lg-2">
                        <div class="single_footer_part">
                            <h4>Resources</h4>
                            <ul class="list-unstyled">
                                <li><a href="">Guides</a></li>
                                <li><a href="">Research</a></li>
                                <li><a href="">Experts</a></li>
                                <li><a href="">Agencies</a></li>
                            </ul>
                        </div>
                    </div>
                    <div class="col-sm-6 col-lg-4">
                        <div class="single_footer_part">
                            <h4>Newsletter</h4>
                            <p>Heaven fruitful doesn't over lesser in days. Appear creeping
                            </p>
                            <div id="mc_embed_signup">
                                <form target="_blank"
                                    action="https://spondonit.us12.list-manage.com/subscribe/post?u=1462626880ade1ac87bd9c93a&amp;id=92a4423d01"
                                    method="get" class="subscribe_form relative mail_part">
                                    <input type="email" name="email" id="newsletter-form-email"
                                        placeholder="Email Address" class="placeholder hide-on-focus"
                                        onfocus="this.placeholder = ''" onblur="this.placeholder = ' Email Address '">
                                    <button type="submit" name="submit" id="newsletter-submit"
                                        class="email_icon newsletter-submit button-contactForm">subscribe</button>
                                    <div class="mt-10 info"></div>
                                </form>
                            </div>
                        </div>
                    </div>
                </div>

            </div>
            <div class="copyright_part">
                <div class="container">
                    <div class="row">
                        <div class="col-lg-8">
                            <div class="copyright_text">
                                <P><!-- Link back to Colorlib can't be removed. Template is licensed under CC BY 3.0. -->
                                    Copyright &copy;
                                    <script>document.write(new Date().getFullYear());</script> All rights reserved |
                                    This template is made with <i class="ti-heart" aria-hidden="true"></i> by <a
                                        href="https://colorlib.com" target="_blank">Colorlib</a>
                                    <!-- Link back to Colorlib can't be removed. Template is licensed under CC BY 3.0. -->
                                </P>
                            </div>
                        </div>
                        <div class="col-lg-4">
                            <div class="footer_icon social_icon">
                                <ul class="list-unstyled">
                                    <li><a href="#" class="single_social_icon"><i class="fab fa-facebook-f"></i></a>
                                    </li>
                                    <li><a href="#" class="single_social_icon"><i class="fab fa-twitter"></i></a></li>
                                    <li><a href="#" class="single_social_icon"><i class="fas fa-globe"></i></a></li>
                                    <li><a href="#" class="single_social_icon"><i class="fab fa-behance"></i></a></li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </footer>
        <!--::footer_part end::-->
        <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.6/dist/umd/popper.min.js"></script>
        <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"></script>
        <script>
           
        </script>
        <script>
            document.addEventListener('DOMContentLoaded', async () => {
                const radioButtons = document.querySelectorAll('input[name="selectedAddress"]')
                const selectedName = document.getElementById('selectedName');
                const selectedPhone = document.getElementById('selectedPhone');
                const selectedEmail = document.getElementById('selectedEmail');
                const selectedCity = document.getElementById('selectedCity');
                const selectedDistrict = document.getElementById('selectedDistrict');
                const selectedState = document.getElementById('selectedState');
                const selectedPincode = document.getElementById('selectedPincode');
                console.log(radioButtons)
                radioButtons.forEach((radio) => {
                    radio.addEventListener('change', async (event) => {
                        const targetRadio = event.target
                        console.log(this)
                        console.log('button has clicked')
                        event.preventDefault()
                        if (targetRadio.checked) {
                            document.getElementById('name').value = targetRadio.dataset.name || ''
                            document.getElementById('number').value = targetRadio.dataset.phone || ''
                            document.getElementById('email').value = targetRadio.dataset.email || ''
                            document.getElementById('city').value = targetRadio.dataset.city || ''
                            document.getElementById('district').value = targetRadio.dataset.district || ''
                            document.getElementById('state').value = targetRadio.dataset.state || ''
                            document.getElementById('pincode').value = targetRadio.dataset.pincode || ''


                        }

                    })
                })
                document.getElementById('saveAddressBtn').addEventListener('click', function(event) {
                    console.log('button has clicked')
                    event.preventDefault()
                const name = document.getElementById('modalName');
                console.log(name)
                const phone = document.getElementById('modalPhone');
                const email = document.getElementById('modalEmail');
                const city = document.getElementById('modalCity');
                const district = document.getElementById('modalDistrict');
                const state = document.getElementById('modalState');
                const pincode = document.getElementById('modalPincode');
                    console.log(name.value,phone,email,city,district,state,pincode)
                // Create a new address item and add it to the address list
                const newAddress = `
                    <div class="col-md-6">
                        <div class="address-item mb-3 d-flex align-items-start">
                            <input type="radio" name="selectedAddress" value="new" class="mr-2" data-name="${name.value}" data-phone="${phone.value}" data-email="${email.value}" data-city="${city.value}" data-district="${district.value}" data-state="${state.value}" data-pincode="${pincode.value}">
                            <textarea class="form-control" rows="3" style="height: 200px;" readonly>
                                Name: ${name.value}, 
                                Phone: ${phone.value}, 
                                Email: ${email.value}, 
                                City: ${city.value}, 
                                District: ${district.value}, 
                                State: ${state.value}, 
                                Pincode: ${pincode.value}
                            </textarea>
                        </div>
                    </div>
                `;
    
                document.getElementById('addresslist').insertAdjacentHTML('beforeend', newAddress);
                $('#addressModal').modal('hide').on('hidden.bs.modal', function () {
            $('.modal-backdrop').remove();
        });            });
            })
        </script>
        <!-- jquery plugins here-->
        <!-- jquery -->
        <script src="/js/jquery-1.12.1.min.js"></script>
        <!-- popper js -->
        <script src="/js/popper.min.js"></script>
        <!-- bootstrap js -->
        <script src="/js/bootstrap.min.js"></script>
        <!-- easing js -->
        <script src="/js/jquery.magnific-popup.js"></script>
        <!-- swiper js -->
        <script src="/js/swiper.min.js"></script>
        <!-- swiper js -->
        <script src="/js/masonry.pkgd.js"></script>
        <!-- particles js -->
        <script src="/js/owl.carousel.min.js"></script>
        <script src="/js/jquery.nice-select.min.js"></script>
        <!-- slick js -->
        <script src="/js/slick.min.js"></script>
        <script src="/js/jquery.counterup.min.js"></script>
        <script src="/js/waypoints.min.js"></script>
        <script src="/js/contact.js"></script>
        <script src="/js/jquery.ajaxchimp.min.js"></script>
        <script src="/js/jquery.form.js"></script>
        <script src="/js/jquery.validate.min.js"></script>
        <script src="/js/mail-script.js"></script>
        <script src="/js/stellar.js"></script>
        <script src="/js/price_rangs.js"></script>
        <!-- custom js -->
        <script src="js/custom.js"></script>
        <% include ('../usersidepartials/footer')%>